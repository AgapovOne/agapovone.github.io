---
title: "Swift Package Manager in 2021"
date: 2021-07-25T10:40:20+05:00
new: true
tags: SPM
---

**left**

- –ö–∞–∫ –ø–∏—Å–∞—Ç—å Package.swift –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –ö–∞–∫ —Ç–µ–≥–∞—Ç—å –≤–µ—Ä—Å–∏–∏
- –ö–∞–∫ —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

## –í–æ–ø—Ä–æ—Å—ã

- –ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É–π—Ç–∏ —Å Cocoapods?
- –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã? –ß—Ç–æ —Å–æ —Å–±–æ—Ä–∫–æ–π –Ω–∞ CI?
- –ö–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã –≤ SwiftPM
- –ö–∞–∫ —É–¥–æ–±–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
- –ö–∞–∫ –≤—ã–ø—É—Å–∫–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

## –ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É–π—Ç–∏ —Å Cocoapods

SwiftPM –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å—ë, —á—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Cocoapods –∏ –¥–∞–∂–µ —á—É—Ç—å –±–æ–ª—å—à–µ.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω –≤ —Å—Ç–∞—Ç—å–µ [useyourloaf](https://useyourloaf.com/blog/add-resources-to-swift-packages/)

### –£–º–µ–µ—Ç –≤ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—ã–±–æ—Ä –≤–µ—Ä—Å–∏–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –º–∞–∂–æ—Ä–Ω–æ–π (95% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ç–∫–∞

## –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã –∏ —á—Ç–æ —Å–æ —Å–±–æ—Ä–∫–æ–π –Ω–∞ CI

–ü–∞–∫–µ—Ç—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ `File` > `Swift Packages`. –ü–æ–∏—Å–∫ –ø–æ `url` –ø–∞–∫–µ—Ç–∞. –ü–∞–∫–µ—Ç —Å–∫–∞—á–∞–µ—Ç—Å—è –∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

![](/swiftpm/versions.png)

**–ú–æ–¥—É–ª–∏** –≤—ã–¥–µ–ª—è—Ç—å —Å—Ç–∞–ª–æ –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ. `File` > `New` > `Swift Package`. –î–æ–±–∞–≤–ª—è—è –µ–≥–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø—Ä–æ–µ–∫—Ç - –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –Ω–∞—à–∏—Ö –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–∞–ø–∫–∞ —Ç–µ—Å—Ç–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–æ–º —Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è Scheme –¥–ª—è –±–∏–ª–¥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –≤ Package.swift

`swift package` —É–º–µ–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Å–æ–±–∏—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–æ–¥—É–ª–∏. –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏, —Ç.–∫. –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å Xcode.

## –ö–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã –≤ SwiftPM

1 —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π = –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤.

**Executable** ‚Äî cli. –£–¥–æ–±–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å –ª—é–±—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç SwiftPM. [swift-argument-parser](https://github.com/apple/swift-argument-parser) ‚Äî –º–æ—â—å.

**Library** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π, —Ç–∞–∫ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π.

## –ö–∞–∫ —É–¥–æ–±–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å

–í–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ç–∞–∫—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é —Ñ–∞–π–ª–æ–≤:

- üìÅ Project (git repo)
  - üìÑ Package.swift
  - üìÑ Package.resolved
  - üìÑ README.md
  - üìÅ Sources (folder)
    - üìÅ {{PackageName}} (folder)
  - üìÅ Tests (folder)
    - üìÅ {{PackageName}}Tests (folder)
  - üìÅ Example (folder)
    - Example.xcodeproj
    - ... any structure of example project
  - üìÑ Packages.xcworkspace
  - Packages.playground (–µ—â–µ –Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª, –Ω–æ –¥–æ–ª–∂–Ω–æ —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å)

xcworkspace —Ñ–∞–π–ª –æ–±—ä–µ–¥–∏–Ω–∏—Ç –≤ —Å–µ–±–µ –¥–≤–µ –≥—Ä—É–ø–ø—ã

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
    location = "group:.">
   </FileRef>
   <FileRef
      location = "group:Example/Example.xcodeproj">
   </FileRef>
</Workspace>
```

–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ xcworkspace –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫, –ø—Ä–∏ —ç—Ç–æ–º –∏–º–µ—è –≤—Å–µ —Å—Ö–µ–º—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ + —Å—Ö–µ–º—É –¥–ª—è —Å–±–æ—Ä–∫–∏ Example –ø—Ä–æ–µ–∫—Ç–∞.

## –ö–∞–∫ —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

–ü–∞–∫–µ—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç —Ä–µ–∑–æ–ª–≤–∏—Ç—å—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Xcode –ø—Ä–æ–µ–∫—Ç–∞. –ï—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç—ã, —Ç–æ –æ–Ω–∏ –ø—Ä–æ–ø–∞–¥—É—Ç –∏ –±–∏–ª–¥ –Ω–µ –±—É–¥–µ—Ç –∏—Ö –≤–∏–¥–µ—Ç—å. –¢–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–µ–Ω—é `File` > `Swift Packages` > `Resolve Package Versions`

**–ü—Ä–æ–±–ª–µ–º—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** —Ä–µ—à–∞—é—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏–µ–º –∫—ç—à–∞ üòÄ –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –ª–µ–∂–∏—Ç –≤ `~/.swiftpm/cache`. –û—Ä–∏–≥–∏–Ω–∞–ª –ª–µ–∂–∏—Ç –≤ `~/Library/Caches/org.swift.swiftpm`. –†—è–¥–æ–º —Å –∫—ç—à–µ–º Cocoapods.

**–ü—Ä–æ–±–ª–µ–º–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** —Å —Ç–µ–º, —á—Ç–æ –º–æ–¥—É–ª–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É —Ä–µ—à–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é. –ö–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã –ø–æ—Å—Ç–∞–≤–∏–º [RxSwift](https://github.com/ReactiveX/RxSwift) 6.0.0+ –∏ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é [Moya](https://github.com/Moya/Moya/releases/tag/14.0.1), –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å RxSwift 5.0.0+. –¢–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤–µ—Ä—Å–∏—è RxSwift –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å—Ç–∞—Ä–∞—è. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –Ω–µ —Ä–µ—à–∏—Ç—Å—è, –Ω–æ –ª–æ–≥ –ø–∏—à–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–π.

![](/swiftpm/dependencies.png)

**–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –æ–¥–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞**

```
Dependencies could not be resolved because root depends on 'Moya' 14.0.1..<15.0.0 and root depends on 'Quick' 4.0.0..<5.0.0.
'Moya' >= 14.0.1 practically depends on 'Quick' 2.0.0..<3.0.0 because 'Moya' 14.0.1 depends on 'Quick' 2.0.0..<3.0.0 and no versions of 'Moya' match the requirement 14.0.2..<15.0.0.
```

TODO: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

[–û–±–∑–æ—Ä –ø–æ SwiftPM –æ—Ç Apple](https://swift.org/package-manager/)

[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API SwiftPM –≤ Package.swift —Ñ–∞–π–ª–µ](https://docs.swift.org/package-manager/)

[–ü—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ SwiftPM](https://swiftpackageindex.com)
