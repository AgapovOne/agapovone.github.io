<!doctype html><html lang=ru-ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>Modern Collection Views | Agapov Alexey</title><meta property="og:site_name" content="Agapov Alexey blog"><meta property="og:title" content="Modern Collection Views | Agapov Alexey"><meta itemprop=name content="Modern Collection Views | Agapov Alexey"><meta name=twitter:title content="Modern Collection Views | Agapov Alexey"><meta name=application-name content="Modern Collection Views | Agapov Alexey"><meta name=description content="iOS and nothing else"><meta name=twitter:description content="iOS and nothing else"><meta itemprop=description content="iOS and nothing else"><meta property="og:description" content="iOS and nothing else"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css><link rel=stylesheet href=/sass/main.min.796719d7f20145839e4ac3d1cc2e47c5723771803b71af5dab2835341e23431f.css><script type=text/javascript>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].a=e[o].a||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym"),ym(83528200,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})</script><noscript><div><img src=https://mc.yandex.ru/watch/83528200 style=position:absolute;left:-9999px alt></div></noscript></head><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>ü§Ø</span>
Agapov Alexey</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Modern Collection Views</h1><div class=post-meta><div><time>July 21, 2021</time></div><div class=tags><a href=/tags/collection-view/>Collection View</a>
<a href=/tags/table-view/>Table View</a>
<a href=/tags/uikit/>UIKit</a></div></div></div></div></header><div class=article-post><p><a href=https://developer.apple.com/documentation/uikit/views_and_controls/collection_views/implementing_modern_collection_views>source –æ—Ç Apple</a></p><p>iOS 14+ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∏—á.
–í iOS 13 –≤–≤–µ–ª–∏ diffable data source.
–í iOS 14 –ø–æ—è–≤–∏–ª—Å—è compositional layout, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü –∏ —É–ª—É—á—à–∞—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.</p><h2 id=–ø–æ—á–µ–º—É-–Ω–µ-—Ç–∞–±–ª–∏—Ü–∞><a href=#%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d0%bd%d0%b5-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d0%b0 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–ü–æ—á–µ–º—É –Ω–µ —Ç–∞–±–ª–∏—Ü–∞?</h2><ul><li>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª</li><li>–£–¥–æ–±–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å state. highlighted/selected/disabled</li></ul><h2 id=—á—Ç–æ-–ø–æ–∑–≤–æ–ª—è–µ—Ç-–¥–µ–ª–∞—Ç—å><a href=#%d1%87%d1%82%d0%be-%d0%bf%d0%be%d0%b7%d0%b2%d0%be%d0%bb%d1%8f%d0%b5%d1%82-%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–ß—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å?</h2><ul><li>Collapsible/Expandable Sections</li><li>–°–µ–∫—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º layout. inset grouped, sidebar (iPad-related), horizontal scroll, columns.</li></ul><h2 id=–≥–ª–∞–≤–Ω—ã–µ-—Ñ–∏—á–∏><a href=#%d0%b3%d0%bb%d0%b0%d0%b2%d0%bd%d1%8b%d0%b5-%d1%84%d0%b8%d1%87%d0%b8 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—á–∏</h2><h3 id=data-source><a href=#data-source class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Data source</h3><p>Data-driven —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑‚Ä¶ RxDataSources? DifferenceKit? Native!
–°–æ–±–∏—Ä–∞–µ–º <code>NSDiffableDataSourceSnapshot</code>, –ø—Ä–∏–º–µ–Ω—è–µ–º.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>var</span> <span style=color:#8be9fd;font-style:italic>snapshot</span> = NSDiffableDataSourceSnapshot&lt;Section, <span style=color:#8be9fd;font-style:italic>Int</span>&gt;()
</span></span><span style=display:flex><span>snapshot.appendSections([.main])
</span></span><span style=display:flex><span>snapshot.appendItems(<span style=color:#8be9fd;font-style:italic>Array</span>(<span style=color:#bd93f9>0.</span>.&lt;<span style=color:#bd93f9>94</span>))
</span></span><span style=display:flex><span>dataSource.apply(snapshot, animatingDifferences: <span style=color:#ff79c6>false</span>)
</span></span></code></pre></td></tr></table></div></div><p>Data source ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å cellRegistration</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>cellRegistration</span> = UICollectionView.CellRegistration&lt;TextCell, <span style=color:#8be9fd;font-style:italic>Int</span>&gt; { (cell, indexPath, identifier) <span style=color:#ff79c6>in</span>
</span></span><span style=display:flex><span>  <span style=color:#6272a4>// Populate the cell with our item description.</span>
</span></span><span style=display:flex><span>  cell.label.text = <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>\(</span>identifier<span style=color:#f1fa8c>)</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>dataSource = UICollectionViewDiffableDataSource&lt;Section, <span style=color:#8be9fd;font-style:italic>Int</span>&gt;(
</span></span><span style=display:flex><span>  collectionView: collectionView
</span></span><span style=display:flex><span>) { (
</span></span><span style=display:flex><span>  collectionView: UICollectionView,
</span></span><span style=display:flex><span>  indexPath: IndexPath,
</span></span><span style=display:flex><span>  identifier: <span style=color:#8be9fd;font-style:italic>Int</span>
</span></span><span style=display:flex><span>) -&gt; UICollectionViewCell? <span style=color:#ff79c6>in</span>
</span></span><span style=display:flex><span>  <span style=color:#6272a4>// Return the cell.</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> collectionView.dequeueConfiguredReusableCell(using: cellRegistration, <span style=color:#ff79c6>for</span>: indexPath, item: identifier)
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>–ï—Å—Ç—å –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∫–∞ —Å native data source. –û–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å –∏ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é —è—á–µ–π–∫—É, –Ω–µ –¥–µ–ª–∞—è reload –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–µ—Å—Ç–µ (<a href=https://github.com/ekazaev/ChatLayout#about-uicollectionviewdiffabledatasource>—Ç—É—Ç –≥–æ–≤–æ—Ä—è—Ç</a>).
<a href=https://github.com/ra1028/DifferenceKit>DifferenceKit</a> –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ –¥–µ–ª–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É. –ë–µ–Ω—á–º–∞—Ä–∫–∏ —ç—Ç–æ–π –ª–∏–±—ã –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω–∞ —Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –ø–æ—Ö–æ–∂–∏—Ö –ª–∏–±. –•–æ—Ä–æ—à–∞—è –ª–∏–±–∞
–ù–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å –Ω–æ–≤—ã–º API cellRegistration –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å native Data source</p><h3 id=layout-–¥–ª—è-—Å–ª–æ–∂–Ω—ã—Ö-—ç–∫—Ä–∞–Ω–æ–≤><a href=#layout-%d0%b4%d0%bb%d1%8f-%d1%81%d0%bb%d0%be%d0%b6%d0%bd%d1%8b%d1%85-%d1%8d%d0%ba%d1%80%d0%b0%d0%bd%d0%be%d0%b2 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Layout –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤</h3><p><img loading=lazy src=/collections/1.png alt width=1170 height=2532>
<code>DistinctSectionsViewController</code> –∫–∞–∫ –ø—Ä–∏–º–µ—Ä —Ä–∞–∑–Ω—ã—Ö layout –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ–∫—Ü–∏–π.</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>layout</span> = UICollectionViewCompositionalLayout { (
</span></span><span style=display:flex><span>  sectionIndex: <span style=color:#8be9fd;font-style:italic>Int</span>,
</span></span><span style=display:flex><span>  layoutEnvironment: NSCollectionLayoutEnvironment
</span></span><span style=display:flex><span>  ) -&gt; NSCollectionLayoutSection? <span style=color:#ff79c6>in</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>guard</span> <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>sectionLayoutKind</span> = SectionLayoutKind(rawValue: sectionIndex) <span style=color:#ff79c6>else</span> { <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>nil</span> }
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>columns</span> = sectionLayoutKind.columnCount
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#6272a4>// The group auto-calculates the actual item width to make</span>
</span></span><span style=display:flex><span>  <span style=color:#6272a4>// the requested number of columns fit, so this widthDimension is ignored.</span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>itemSize</span> = NSCollectionLayoutSize(
</span></span><span style=display:flex><span>    widthDimension: .fractionalWidth(<span style=color:#bd93f9>1.0</span>),
</span></span><span style=display:flex><span>    heightDimension: .fractionalHeight(<span style=color:#bd93f9>1.0</span>)
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>item</span> = NSCollectionLayoutItem(layoutSize: itemSize)
</span></span><span style=display:flex><span>  item.contentInsets = NSDirectionalEdgeInsets(top: <span style=color:#bd93f9>2</span>, leading: <span style=color:#bd93f9>2</span>, bottom: <span style=color:#bd93f9>2</span>, trailing: <span style=color:#bd93f9>2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>groupHeight</span> = columns == <span style=color:#bd93f9>1</span> ?
</span></span><span style=display:flex><span>    NSCollectionLayoutDimension.absolute(<span style=color:#bd93f9>44</span>) :
</span></span><span style=display:flex><span>    NSCollectionLayoutDimension.fractionalWidth(<span style=color:#bd93f9>0.2</span>)
</span></span><span style=display:flex><span>    <span style=color:#6272a4>// Element height takes 20% of section width</span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>groupSize</span> = NSCollectionLayoutSize(
</span></span><span style=display:flex><span>    widthDimension: .fractionalWidth(<span style=color:#bd93f9>1.0</span>),
</span></span><span style=display:flex><span>    heightDimension: groupHeight
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>group</span> = NSCollectionLayoutGroup.horizontal(layoutSize: groupSize, subitem: item, count: columns)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>section</span> = NSCollectionLayoutSection(group: group)
</span></span><span style=display:flex><span>  section.contentInsets = NSDirectionalEdgeInsets(top: <span style=color:#bd93f9>20</span>, leading: <span style=color:#bd93f9>20</span>, bottom: <span style=color:#bd93f9>20</span>, trailing: <span style=color:#bd93f9>20</span>)
</span></span><span style=display:flex><span>  section.contentInsetsReference = .readableContent
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> section
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Layout Environment</strong> —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ —Ç—Ä–µ–π—Ç–∞–º–∏ –ø–æ–∑–≤–æ–ª–∏—Ç –º–µ–Ω—è—Ç—å layout. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ –∞–π–ø–∞–¥. –ü—Ä–∏–º–µ—Ä ‚Äî <code>AdaptiveSectionsViewController</code></li><li><strong>–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –æ—Ç—Å—Ç—É–ø–∞–º</strong> –æ—Ç —Ä–æ–¥–Ω—ã—Ö layout margins/readable guide. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É <code>NSCollectionLayoutSection</code></li><li><strong>–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞</strong> –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É —Å–µ–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π —É leading –≥—Ä–∞–Ω–∏—Ü—ã —ç–ª–µ–º–µ–Ω—Ç–∞. <code>OrthogonalScrollBehaviorViewController</code></li></ul><h3 id=cell-configuration><a href=#cell-configuration class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Cell Configuration</h3><p>–£ <a href=https://developer.apple.com/documentation/uikit/uicollectionviewcell>UICollectionViewCell</a> –º–æ–∂–Ω–æ –ø–æ –Ω–æ–≤–æ–π —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.
<a href=https://developer.apple.com/documentation/uikit/uicollectionviewcell/3600949-contentconfiguration>contentConfiguration</a> –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç (—Ç–µ–∫—Å—Ç, accessory</p><p>List Cell –¥–ª—è Expandable/Collapsible sections. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å indentation (–æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞)
<a href=https://developer.apple.com/documentation/uikit/uicollectionviewlistcell>UICollectionViewListCell</a></p><h2 id=—Ö–æ—Ä–æ—à–∏–µ-–Ω–æ–≤–æ—Å—Ç–∏-–¥–ª—è-–¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤><a href=#%d1%85%d0%be%d1%80%d0%be%d1%88%d0%b8%d0%b5-%d0%bd%d0%be%d0%b2%d0%be%d1%81%d1%82%d0%b8-%d0%b4%d0%bb%d1%8f-%d0%b4%d0%b8%d0%b7%d0%b0%d0%b9%d0%bd%d0%b5%d1%80%d0%be%d0%b2 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤</h2><h3 id=—Ç–µ–Ω—å-–¥–ª—è-–≤—Å–µ–π-—Å–µ–∫—Ü–∏–∏-insetgrouped-—ç–ª–µ–º–µ–Ω—Ç–æ–≤-–∏–ª–∏-—Ä–∞–º–∫–∞><a href=#%d1%82%d0%b5%d0%bd%d1%8c-%d0%b4%d0%bb%d1%8f-%d0%b2%d1%81%d0%b5%d0%b9-%d1%81%d0%b5%d0%ba%d1%86%d0%b8%d0%b8-insetgrouped-%d1%8d%d0%bb%d0%b5%d0%bc%d0%b5%d0%bd%d1%82%d0%be%d0%b2-%d0%b8%d0%bb%d0%b8-%d1%80%d0%b0%d0%bc%d0%ba%d0%b0 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–¢–µ–Ω—å –¥–ª—è –≤—Å–µ–π —Å–µ–∫—Ü–∏–∏ insetGrouped —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ò–ª–∏ —Ä–∞–º–∫–∞.</h3><p>–ò–∑–∏!
<img loading=lazy src=/collections/2.png alt width=1170 height=2532>
<code>SectionBackgroundDecorationView</code> –≤ –ø—Ä–∏–º–µ—Ä–µ.</p><h3 id=–ø—Ä–∏–ª–∏–ø–∞—é—â–∏–µ-—Ö–µ–¥–µ—Ä—ã—Ñ—É—Ç–µ—Ä—ã-—Å–µ–∫—Ü–∏–π><a href=#%d0%bf%d1%80%d0%b8%d0%bb%d0%b8%d0%bf%d0%b0%d1%8e%d1%89%d0%b8%d0%b5-%d1%85%d0%b5%d0%b4%d0%b5%d1%80%d1%8b%d1%84%d1%83%d1%82%d0%b5%d1%80%d1%8b-%d1%81%d0%b5%d0%ba%d1%86%d0%b8%d0%b9 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–ü—Ä–∏–ª–∏–ø–∞—é—â–∏–µ —Ö–µ–¥–µ—Ä—ã/—Ñ—É—Ç–µ—Ä—ã —Å–µ–∫—Ü–∏–π</h3><p>–ò–∑–∏!
<img loading=lazy src=/collections/3.png alt width=1170 height=2532>
<code>PinnedSectionHeaderFooterViewController</code> –≤ –ø—Ä–∏–º–µ—Ä–µ.</p><h3 id=–ø–∞–≥–∏–Ω–∞—Ü–∏—è-–ø—Ä–∏-—Å–∫—Ä–æ–ª–ª–µ><a href=#%d0%bf%d0%b0%d0%b3%d0%b8%d0%bd%d0%b0%d1%86%d0%b8%d1%8f-%d0%bf%d1%80%d0%b8-%d1%81%d0%ba%d1%80%d0%be%d0%bb%d0%bb%d0%b5 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>–ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ</h3><p><img loading=lazy src=/collections/4.png alt width=1668 height=2388>
<code>OrthogonalScrollBehaviorViewController</code> –≤ –ø—Ä–∏–º–µ—Ä–µ</p></div><nav class=toc></nav></article></div><div class=container><nav class="flex container suggested"><a rel=next href=/articles/swiftpm/ title="Next post (newer)"><span>Next</span>
Swift Package Manager in 2021</a></nav></div><div class=container></div></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.10be7d4b754b9dceb71734a10c8c89ba79f6b5cda9611b507bed984bc3ac7135.js data-enable-footnotes=true></script></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js></script>
<script>tocbot.init({tocSelector:".toc",contentSelector:".article-post",headingSelector:"h2",collapseDepth:2})</script></body></html>