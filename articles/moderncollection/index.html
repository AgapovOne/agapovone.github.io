<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=theme-color content="dark">
<title>Modern Collection Views | Agapov Alexey</title>
<meta property="og:site_name" content="Alexey Agapov blog">
<meta property="og:title" content="Modern Collection Views | Agapov Alexey">
<meta itemprop=name content="Modern Collection Views | Agapov Alexey">
<meta name=twitter:title content="Modern Collection Views | Agapov Alexey">
<meta name=application-name content="Modern Collection Views | Agapov Alexey">
<meta name=description content="iOS and nothing else.">
<meta name=twitter:description content="iOS and nothing else.">
<meta itemprop=description content="iOS and nothing else.">
<meta property="og:description" content="iOS and nothing else.">
<link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css>
<link rel=stylesheet href=/sass/main.min.ecbc24bdb795c7bda75244b51e790e543845c3a8b8eb6915a9818c96d1048140.css>
</head> <script>(function(){const b='ThemeColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.userColorScheme='dark':document.documentElement.dataset.userColorScheme='light'})()</script>
<body class=dark>
<nav class=navbar>
<div class=container>
<div class=flex>
<div>
<a class=brand href=/>
<span class=emoji>
ü§Ø
</span>
Agapov Alexey
</a>
</div>
<div class=flex>
<a href=/blog/>Blog</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg>
</button>
</div>
</div>
</div>
</nav>
<main>
<div class=container>
<article>
<header class=article-header>
<div class=thumb>
<div>
<h1>Modern Collection Views</h1>
<div class=post-meta>
<div>
By Alexey Agapov |
<time>July 21, 2021</time>
| 3 minutes
</div>
<div class=tags>
</div>
</div>
</div>
</div>
</header>
<nav class=toc></nav>
<div class=article-post><p><a href=https://developer.apple.com/documentation/uikit/views_and_controls/collection_views/implementing_modern_collection_views>source –æ—Ç Apple</a></p>
<p>iOS 14+ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∏—á.
–í iOS 13 –≤–≤–µ–ª–∏ diffable data source.
–í iOS 14 –ø–æ—è–≤–∏–ª—Å—è compositional layout, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü –∏ —É–ª—É—á—à–∞—é—â–∏–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.</p>
<h3 id=–ø–æ—á–µ–º—É-–Ω–µ-—Ç–∞–±–ª–∏—Ü–∞>
<a href=#%d0%bf%d0%be%d1%87%d0%b5%d0%bc%d1%83-%d0%bd%d0%b5-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d0%b0 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–ü–æ—á–µ–º—É –Ω–µ —Ç–∞–±–ª–∏—Ü–∞?
</h3>
<ul>
<li>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª</li>
<li>–£–¥–æ–±–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å state. highlighted/selected/disabled</li>
</ul>
<h3 id=—á—Ç–æ-–ø–æ–∑–≤–æ–ª—è–µ—Ç-–¥–µ–ª–∞—Ç—å>
<a href=#%d1%87%d1%82%d0%be-%d0%bf%d0%be%d0%b7%d0%b2%d0%be%d0%bb%d1%8f%d0%b5%d1%82-%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–ß—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å?
</h3>
<ul>
<li>Collapsible/Expandable Sections</li>
<li>–°–µ–∫—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º layout. inset grouped, sidebar (iPad-related), horizontal scroll, columns.</li>
</ul>
<h2 id=–≥–ª–∞–≤–Ω—ã–µ-—Ñ–∏—á–∏>
<a href=#%d0%b3%d0%bb%d0%b0%d0%b2%d0%bd%d1%8b%d0%b5-%d1%84%d0%b8%d1%87%d0%b8 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—á–∏
</h2>
<h3 id=data-source>
<a href=#data-source class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
Data source
</h3>
<p>Data-driven —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑‚Ä¶ RxDataSources? DifferenceKit? Native!
–°–æ–±–∏—Ä–∞–µ–º snapshot, –ø—Ä–∏–º–µ–Ω—è–µ–º.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=kd>var</span> <span class=nv>snapshot</span> <span class=p>=</span> <span class=n>NSDiffableDataSourceSnapshot</span><span class=p>&lt;</span><span class=n>Section</span><span class=p>,</span> <span class=nb>Int</span><span class=p>&gt;()</span>
<span class=n>snapshot</span><span class=p>.</span><span class=n>appendSections</span><span class=p>([.</span><span class=n>main</span><span class=p>])</span>
<span class=n>snapshot</span><span class=p>.</span><span class=n>appendItems</span><span class=p>(</span><span class=nb>Array</span><span class=p>(</span><span class=mf>0.</span><span class=p>.&lt;</span><span class=mi>94</span><span class=p>))</span>
<span class=n>dataSource</span><span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>snapshot</span><span class=p>,</span> <span class=n>animatingDifferences</span><span class=p>:</span> <span class=kc>false</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p>Data source ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å cellRegistration</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=kd>let</span> <span class=nv>cellRegistration</span> <span class=p>=</span> <span class=n>UICollectionView</span><span class=p>.</span><span class=n>CellRegistration</span><span class=p>&lt;</span><span class=n>TextCell</span><span class=p>,</span> <span class=nb>Int</span><span class=p>&gt;</span> <span class=p>{</span> <span class=p>(</span><span class=n>cell</span><span class=p>,</span> <span class=n>indexPath</span><span class=p>,</span> <span class=n>identifier</span><span class=p>)</span> <span class=k>in</span>
    <span class=c1>// Populate the cell with our item description.</span>
    <span class=n>cell</span><span class=p>.</span><span class=n>label</span><span class=p>.</span><span class=n>text</span> <span class=p>=</span> <span class=s>&#34;</span><span class=si>\(</span><span class=n>identifier</span><span class=si>)</span><span class=s>&#34;</span>
<span class=p>}</span>
<span class=n>dataSource</span> <span class=p>=</span> <span class=n>UICollectionViewDiffableDataSource</span><span class=p>&lt;</span><span class=n>Section</span><span class=p>,</span> <span class=nb>Int</span><span class=p>&gt;(</span><span class=n>collectionView</span><span class=p>:</span> <span class=n>collectionView</span><span class=p>)</span> <span class=p>{</span>
<span class=p>(</span><span class=n>collectionView</span><span class=p>:</span> <span class=n>UICollectionView</span><span class=p>,</span> <span class=n>indexPath</span><span class=p>:</span> <span class=n>IndexPath</span><span class=p>,</span> <span class=n>identifier</span><span class=p>:</span> <span class=nb>Int</span><span class=p>)</span> <span class=p>-&gt;</span> <span class=n>UICollectionViewCell</span><span class=p>?</span> <span class=k>in</span>
    <span class=c1>// Return the cell.</span>
    <span class=k>return</span> <span class=n>collectionView</span><span class=p>.</span><span class=n>dequeueConfiguredReusableCell</span><span class=p>(</span><span class=n>using</span><span class=p>:</span> <span class=n>cellRegistration</span><span class=p>,</span> <span class=k>for</span><span class=p>:</span> <span class=n>indexPath</span><span class=p>,</span> <span class=n>item</span><span class=p>:</span> <span class=n>identifier</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><p>–ï—Å—Ç—å –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∫–∞ —Å native data source. –û–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å –∏ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é —è—á–µ–π–∫—É, –Ω–µ –¥–µ–ª–∞—è reload –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–µ—Å—Ç–µ (<a href=https://github.com/ekazaev/ChatLayout#about-uicollectionviewdiffabledatasource>—Ç—É—Ç –≥–æ–≤–æ—Ä—è—Ç</a>).
<a href=https://github.com/ra1028/DifferenceKit>DifferenceKit</a> –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ –¥–µ–ª–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É. –ë–µ–Ω—á–º–∞—Ä–∫–∏ —ç—Ç–æ–π –ª–∏–±—ã –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω–∞ —Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –ø–æ—Ö–æ–∂–∏—Ö –ª–∏–±. –•–æ—Ä–æ—à–∞—è –ª–∏–±–∞
–ù–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å –Ω–æ–≤—ã–º API cellRegistration –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å native Data source</p>
<h3 id=layout-–¥–ª—è-—Å–ª–æ–∂–Ω—ã—Ö-—ç–∫—Ä–∞–Ω–æ–≤>
<a href=#layout-%d0%b4%d0%bb%d1%8f-%d1%81%d0%bb%d0%be%d0%b6%d0%bd%d1%8b%d1%85-%d1%8d%d0%ba%d1%80%d0%b0%d0%bd%d0%be%d0%b2 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
Layout –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
</h3>
<p><img loading=lazy src=/collections/1.png alt width=1170 height=2532>
<code>DistinctSectionsViewController</code> –∫–∞–∫ –ø—Ä–∏–º–µ—Ä —Ä–∞–∑–Ω—ã—Ö layout –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ–∫—Ü–∏–π.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-swift data-lang=swift><span class=kd>let</span> <span class=nv>layout</span> <span class=p>=</span> <span class=n>UICollectionViewCompositionalLayout</span> <span class=p>{</span> <span class=p>(</span><span class=n>sectionIndex</span><span class=p>:</span> <span class=nb>Int</span><span class=p>,</span>
            <span class=n>layoutEnvironment</span><span class=p>:</span> <span class=n>NSCollectionLayoutEnvironment</span><span class=p>)</span> <span class=p>-&gt;</span> <span class=n>NSCollectionLayoutSection</span><span class=p>?</span> <span class=k>in</span>

    <span class=k>guard</span> <span class=kd>let</span> <span class=nv>sectionLayoutKind</span> <span class=p>=</span> <span class=n>SectionLayoutKind</span><span class=p>(</span><span class=n>rawValue</span><span class=p>:</span> <span class=n>sectionIndex</span><span class=p>)</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=kc>nil</span> <span class=p>}</span>
    <span class=kd>let</span> <span class=nv>columns</span> <span class=p>=</span> <span class=n>sectionLayoutKind</span><span class=p>.</span><span class=n>columnCount</span>

    <span class=c1>// The group auto-calculates the actual item width to make</span>
    <span class=c1>// the requested number of columns fit, so this widthDimension is ignored.</span>
    <span class=kd>let</span> <span class=nv>itemSize</span> <span class=p>=</span> <span class=n>NSCollectionLayoutSize</span><span class=p>(</span><span class=n>widthDimension</span><span class=p>:</span> <span class=p>.</span><span class=n>fractionalWidth</span><span class=p>(</span><span class=mf>1.0</span><span class=p>),</span>
                                          <span class=n>heightDimension</span><span class=p>:</span> <span class=p>.</span><span class=n>fractionalHeight</span><span class=p>(</span><span class=mf>1.0</span><span class=p>))</span>
    <span class=kd>let</span> <span class=nv>item</span> <span class=p>=</span> <span class=n>NSCollectionLayoutItem</span><span class=p>(</span><span class=n>layoutSize</span><span class=p>:</span> <span class=n>itemSize</span><span class=p>)</span>
    <span class=n>item</span><span class=p>.</span><span class=n>contentInsets</span> <span class=p>=</span> <span class=n>NSDirectionalEdgeInsets</span><span class=p>(</span><span class=n>top</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>leading</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>bottom</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>trailing</span><span class=p>:</span> <span class=mi>2</span><span class=p>)</span>

    <span class=kd>let</span> <span class=nv>groupHeight</span> <span class=p>=</span> <span class=n>columns</span> <span class=p>==</span> <span class=mi>1</span> <span class=p>?</span>
        <span class=n>NSCollectionLayoutDimension</span><span class=p>.</span><span class=n>absolute</span><span class=p>(</span><span class=mi>44</span><span class=p>)</span> <span class=p>:</span>
        <span class=n>NSCollectionLayoutDimension</span><span class=p>.</span><span class=n>fractionalWidth</span><span class=p>(</span><span class=mf>0.2</span><span class=p>)</span>
        <span class=c1>// Element height takes 20% of section width</span>
    <span class=kd>let</span> <span class=nv>groupSize</span> <span class=p>=</span> <span class=n>NSCollectionLayoutSize</span><span class=p>(</span><span class=n>widthDimension</span><span class=p>:</span> <span class=p>.</span><span class=n>fractionalWidth</span><span class=p>(</span><span class=mf>1.0</span><span class=p>),</span>
                                                  <span class=n>heightDimension</span><span class=p>:</span> <span class=n>groupHeight</span><span class=p>)</span>
    <span class=kd>let</span> <span class=nv>group</span> <span class=p>=</span> <span class=n>NSCollectionLayoutGroup</span><span class=p>.</span><span class=n>horizontal</span><span class=p>(</span><span class=n>layoutSize</span><span class=p>:</span> <span class=n>groupSize</span><span class=p>,</span> <span class=n>subitem</span><span class=p>:</span> <span class=n>item</span><span class=p>,</span> <span class=bp>count</span><span class=p>:</span> <span class=n>columns</span><span class=p>)</span>

    <span class=kd>let</span> <span class=nv>section</span> <span class=p>=</span> <span class=n>NSCollectionLayoutSection</span><span class=p>(</span><span class=n>group</span><span class=p>:</span> <span class=n>group</span><span class=p>)</span>
    <span class=n>section</span><span class=p>.</span><span class=n>contentInsets</span> <span class=p>=</span> <span class=n>NSDirectionalEdgeInsets</span><span class=p>(</span><span class=n>top</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span> <span class=n>leading</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span> <span class=n>bottom</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span> <span class=n>trailing</span><span class=p>:</span> <span class=mi>20</span><span class=p>)</span>
    <span class=n>section</span><span class=p>.</span><span class=n>contentInsetsReference</span> <span class=p>=</span> <span class=p>.</span><span class=n>readableContent</span>
    <span class=k>return</span> <span class=n>section</span>
<span class=p>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Layout Environment</strong> —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ —Ç—Ä–µ–π—Ç–∞–º–∏ –ø–æ–∑–≤–æ–ª–∏—Ç –º–µ–Ω—è—Ç—å layout. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ –∞–π–ø–∞–¥. –ü—Ä–∏–º–µ—Ä ‚Äî <code>AdaptiveSectionsViewController</code></li>
<li><strong>–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –æ—Ç—Å—Ç—É–ø–∞–º</strong> –æ—Ç —Ä–æ–¥–Ω—ã—Ö layout margins/readable guide. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É <code>NSCollectionLayoutSection</code></li>
<li><strong>–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞</strong> –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É —Å–µ–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π —É leading –≥—Ä–∞–Ω–∏—Ü—ã —ç–ª–µ–º–µ–Ω—Ç–∞. <code>OrthogonalScrollBehaviorViewController</code></li>
</ul>
<h3 id=cell-configuration>
<a href=#cell-configuration class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
Cell Configuration
</h3>
<p>–£ <a href=https://developer.apple.com/documentation/uikit/uicollectionviewcell>UICollectionViewCell</a> –º–æ–∂–Ω–æ –ø–æ –Ω–æ–≤–æ–π —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.
<a href=https://developer.apple.com/documentation/uikit/uicollectionviewcell/3600949-contentconfiguration>contentConfiguration</a> –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç (—Ç–µ–∫—Å—Ç, accessory</p>
<p>List Cell –¥–ª—è Expandable/Collapsible sections. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å indentation (–æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞)
<a href=https://developer.apple.com/documentation/uikit/uicollectionviewlistcell>UICollectionViewListCell</a></p>
<h2 id=—Ö–æ—Ä–æ—à–∏–µ-–Ω–æ–≤–æ—Å—Ç–∏-–¥–ª—è-–≤–æ–≤—ã>
<a href=#%d1%85%d0%be%d1%80%d0%be%d1%88%d0%b8%d0%b5-%d0%bd%d0%be%d0%b2%d0%be%d1%81%d1%82%d0%b8-%d0%b4%d0%bb%d1%8f-%d0%b2%d0%be%d0%b2%d1%8b class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è –í–æ–≤—ã
</h2>
<h4 id=—Ç–µ–Ω—å-–¥–ª—è-–≤—Å–µ–π-—Å–µ–∫—Ü–∏–∏-insetgrouped-—ç–ª–µ–º–µ–Ω—Ç–æ–≤-–∏–ª–∏-—Ä–∞–º–∫–∞>
<a href=#%d1%82%d0%b5%d0%bd%d1%8c-%d0%b4%d0%bb%d1%8f-%d0%b2%d1%81%d0%b5%d0%b9-%d1%81%d0%b5%d0%ba%d1%86%d0%b8%d0%b8-insetgrouped-%d1%8d%d0%bb%d0%b5%d0%bc%d0%b5%d0%bd%d1%82%d0%be%d0%b2-%d0%b8%d0%bb%d0%b8-%d1%80%d0%b0%d0%bc%d0%ba%d0%b0 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–¢–µ–Ω—å –¥–ª—è –≤—Å–µ–π —Å–µ–∫—Ü–∏–∏ insetGrouped —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ò–ª–∏ —Ä–∞–º–∫–∞.
</h4>
<p>–ò–∑–∏!
<img loading=lazy src=/collections/2.png alt width=1170 height=2532>
<code>SectionBackgroundDecorationView</code> –≤ –ø—Ä–∏–º–µ—Ä–µ.</p>
<h4 id=–ø—Ä–∏–ª–∏–ø–∞—é—â–∏–µ-—Ö–µ–¥–µ—Ä—ã—Ñ—É—Ç–µ—Ä—ã-—Å–µ–∫—Ü–∏–π>
<a href=#%d0%bf%d1%80%d0%b8%d0%bb%d0%b8%d0%bf%d0%b0%d1%8e%d1%89%d0%b8%d0%b5-%d1%85%d0%b5%d0%b4%d0%b5%d1%80%d1%8b%d1%84%d1%83%d1%82%d0%b5%d1%80%d1%8b-%d1%81%d0%b5%d0%ba%d1%86%d0%b8%d0%b9 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–ü—Ä–∏–ª–∏–ø–∞—é—â–∏–µ —Ö–µ–¥–µ—Ä—ã/—Ñ—É—Ç–µ—Ä—ã —Å–µ–∫—Ü–∏–π
</h4>
<p>–ò–∑–∏!
<img loading=lazy src=/collections/3.png alt width=1170 height=2532>
<code>PinnedSectionHeaderFooterViewController</code> –≤ –ø—Ä–∏–º–µ—Ä–µ.</p>
<h4 id=–ø–∞–≥–∏–Ω–∞—Ü–∏—è-–ø—Ä–∏-—Å–∫—Ä–æ–ª–ª–µ>
<a href=#%d0%bf%d0%b0%d0%b3%d0%b8%d0%bd%d0%b0%d1%86%d0%b8%d1%8f-%d0%bf%d1%80%d0%b8-%d1%81%d0%ba%d1%80%d0%be%d0%bb%d0%bb%d0%b5 class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>
–ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
</h4>
<p><img loading=lazy src=/collections/4.png alt width=1668 height=2388>
<code>OrthogonalScrollBehaviorViewController</code> –≤ –ø—Ä–∏–º–µ—Ä–µ</p>
</div>
</article>
</div>
<div class=container>
<nav class="flex container suggested">
</nav>
</div>
<div class=container></div>
</main>
<footer class="footer flex">
<section class=container>
<nav class=footer-links>
<a href=/index.xml>RSS</a>
</nav>
</section>
<script defer src=/ts/features.39c567b3af1363f8abe74bfd650f3d58cb963716b7ad4b3b53f801d3ca585599.js data-enable-footnotes=true></script>
</footer>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js></script>
<script>tocbot.init({tocSelector:".toc",contentSelector:".article-post",headingSelector:"h2, h3, h4"})</script>
</body>
</html>